{% load custom_filters %}

<form action="{% url "users:registration" %}" method="post" id="registration_form">
	{% csrf_token %}
	{% for field in form %}
		<div class="field_wrapper">
			{% if field.errors %}
				{% with "class,error,tabindex,"|concat:forloop.counter as arguements %}
					{{ field.label_tag }} {{ field|addattrs:arguements }}
				{% endwith %}
				{% for err in field.errors %}
					<p class="field_error">{{ err }}</p>
				{% endfor %}
			{% else %}
				{% with "tabindex,"|concat:forloop.counter as arguements %}
					{{ field.label_tag }} {{ field|addattrs:arguements }}
				{% endwith %}
			{% endif %}
		</div>							
	{% endfor %}
	{% if form.non_field_errors %}
		<div class="non_field_error_list">
			{% for err in form.non_field_errors %}
				<p class="non_field_error">{{ err }}</p>
			{% endfor %}
		</div>							
	{% endif %}
	<button type="submit" form="registration_form" value="Submit" class="button">Submit</button>				
</form>